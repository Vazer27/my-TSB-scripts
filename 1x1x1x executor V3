--// Modern Code Runner GUI - LocalScript

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local TweenService = game:GetService("TweenService")

local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

-- Create ScreenGui
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "CodeRunnerGUI"
screenGui.Parent = playerGui
screenGui.ResetOnSpawn = false

-- Create main Frame
local frame = Instance.new("Frame")
frame.Size = UDim2.new(0, 400, 0, 250)
frame.Position = UDim2.new(0.5, -200, 0.5, -125)
frame.BackgroundColor3 = Color3.fromRGB(2, 48, 32)
frame.BorderSizePixel = 0
frame.Active = true
frame.Draggable = true
frame.Parent = screenGui

-- Rounded corners
Instance.new("UICorner", frame).CornerRadius = UDim.new(0, 12)

-- Title
local title = Instance.new("TextLabel")
title.Text = "1x1x1x1 Executor"
title.Font = Enum.Font.GothamBold
title.TextSize = 18
title.TextColor3 = Color3.fromRGB(0, 255, 0)
title.BackgroundTransparency = 1
title.Size = UDim2.new(1, 0, 0, 30)
title.Position = UDim2.new(0, 0, 0, 0)
title.Parent = frame

-- Player Tab Button
local playerTab = Instance.new("TextButton")
playerTab.Size = UDim2.new(0, 80, 0, 30)
playerTab.Position = UDim2.new(0, -85, 0, 10)
playerTab.Text = "üë§ Player"
playerTab.BackgroundColor3 = Color3.fromRGB(0, 170, 255)
playerTab.TextColor3 = Color3.fromRGB(255, 255, 255)
playerTab.Font = Enum.Font.GothamBold
playerTab.TextSize = 14
playerTab.Parent = frame
Instance.new("UICorner", playerTab).CornerRadius = UDim.new(0, 6)

-- Code Box
local codeBox = Instance.new("TextBox")
codeBox.Size = UDim2.new(1, -20, 0, 150)
codeBox.Position = UDim2.new(0, 10, 0, 40)
codeBox.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
codeBox.TextColor3 = Color3.fromRGB(255, 255, 255)
codeBox.ClearTextOnFocus = false
codeBox.MultiLine = true
codeBox.TextWrapped = true
codeBox.Text = "Scripts & Lua Code Here"
codeBox.Font = Enum.Font.Code
codeBox.TextSize = 16
codeBox.Parent = frame
Instance.new("UICorner", codeBox).CornerRadius = UDim.new(0, 6)

-- Run Button
local runButton = Instance.new("TextButton")
runButton.Size = UDim2.new(0, 100, 0, 30)
runButton.Position = UDim2.new(1, -110, 1, -40)
runButton.BackgroundColor3 = Color3.fromRGB(0, 255, 0)
runButton.TextColor3 = Color3.fromRGB(255, 255, 255)
runButton.Text = "‚ñ∂Ô∏è Run Script"
runButton.Font = Enum.Font.GothamMedium
runButton.TextSize = 16
runButton.Parent = frame
Instance.new("UICorner", runButton).CornerRadius = UDim.new(0, 6)

-- Clear Button
local clearButton = Instance.new("TextButton")
clearButton.Size = UDim2.new(0, 100, 0, 30)
clearButton.Position = UDim2.new(0, 10, 1, -40)
clearButton.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
clearButton.TextColor3 = Color3.fromRGB(255, 255, 255)
clearButton.Text = "üóëÔ∏è Clear"
clearButton.Font = Enum.Font.GothamMedium
clearButton.TextSize = 16
clearButton.Parent = frame
Instance.new("UICorner", clearButton).CornerRadius = UDim.new(0, 6)

clearButton.MouseButton1Click:Connect(function()
	codeBox.Text = ""
end)

-- Copy Button
local copyButton = Instance.new("TextButton")
copyButton.Size = UDim2.new(0, 120, 0, 30)
copyButton.Position = UDim2.new(0.5, -60, 1, -40)
copyButton.BackgroundColor3 = Color3.fromRGB(85, 85, 85)
copyButton.TextColor3 = Color3.fromRGB(0, 0, 0)
copyButton.Text = "üìã Copy"
copyButton.Font = Enum.Font.GothamMedium
copyButton.TextSize = 16
copyButton.Parent = frame
Instance.new("UICorner", copyButton).CornerRadius = UDim.new(0, 6)

copyButton.MouseButton1Click:Connect(function()
	if setclipboard then
		setclipboard(codeBox.Text)
	end
end)

-- Notification System
local function showNotification(titleText, bodyText)
	local notifFrame = Instance.new("Frame")
	notifFrame.Size = UDim2.new(0, 300, 0, 100)
	notifFrame.Position = UDim2.new(1, -320, 1, -120)
	notifFrame.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
	notifFrame.BackgroundTransparency = 1
	notifFrame.BorderSizePixel = 0
	notifFrame.Parent = screenGui
	Instance.new("UICorner", notifFrame).CornerRadius = UDim.new(0, 10)

	local title = Instance.new("TextLabel")
	title.Text = titleText
	title.Font = Enum.Font.GothamBold
	title.TextSize = 18
	title.TextColor3 = Color3.fromRGB(255, 255, 255)
	title.BackgroundTransparency = 1
	title.Size = UDim2.new(1, -20, 0, 25)
	title.Position = UDim2.new(0, 10, 0, 8)
	title.TextXAlignment = Enum.TextXAlignment.Left
	title.Parent = notifFrame

	local message = Instance.new("TextLabel")
	message.Text = bodyText
	message.Font = Enum.Font.Gotham
	message.TextSize = 14
	message.TextColor3 = Color3.fromRGB(230, 230, 230)
	message.BackgroundTransparency = 1
	message.Size = UDim2.new(1, -20, 1, -40)
	message.Position = UDim2.new(0, 10, 0, 35)
	message.TextWrapped = true
	message.TextXAlignment = Enum.TextXAlignment.Left
	message.TextYAlignment = Enum.TextYAlignment.Top
	message.Parent = notifFrame

	for _, v in pairs(notifFrame:GetChildren()) do
		if v:IsA("TextLabel") then
			v.TextTransparency = 1
		end
	end

	TweenService:Create(notifFrame, TweenInfo.new(0.3), {BackgroundTransparency = 0.2}):Play()
	for _, v in pairs(notifFrame:GetChildren()) do
		if v:IsA("TextLabel") then
			TweenService:Create(v, TweenInfo.new(0.3), {TextTransparency = 0}):Play()
		end
	end

	task.delay(3, function()
		TweenService:Create(notifFrame, TweenInfo.new(0.3), {BackgroundTransparency = 1}):Play()
		for _, v in pairs(notifFrame:GetChildren()) do
			if v:IsA("TextLabel") then
				TweenService:Create(v, TweenInfo.new(0.3), {TextTransparency = 1}):Play()
			end
		end
		task.wait(0.4)
		notifFrame:Destroy()
	end)
end

-- Teleport GUI (after notifications)
local playerPanel = Instance.new("Frame")
playerPanel.Size = UDim2.new(1, -20, 1, -50)
playerPanel.Position = UDim2.new(0, 10, 0, 40)
playerPanel.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
playerPanel.Visible = false
playerPanel.Parent = frame
Instance.new("UICorner", playerPanel).CornerRadius = UDim.new(0, 8)

local font = Enum.Font.FredokaOne

local function createSetting(labelText, defaultText, yPos)
	local label = Instance.new("TextLabel")
	label.Text = labelText
	label.Size = UDim2.new(0, 100, 0, 25)
	label.Position = UDim2.new(0, 10, 0, yPos)
	label.BackgroundTransparency = 1
	label.TextColor3 = Color3.new(1, 1, 1)
	label.Font = font
	label.TextSize = 16
	label.TextXAlignment = Enum.TextXAlignment.Left
	label.Parent = playerPanel

	local box = Instance.new("TextBox")
	box.Text = defaultText
	box.Size = UDim2.new(0, 100, 0, 25)
	box.Position = UDim2.new(0, 130, 0, yPos)
	box.BackgroundColor3 = Color3.fromRGB(100, 100, 100)
	box.TextColor3 = Color3.new(1, 1, 1)
	box.Font = font
	box.TextSize = 16
	box.ClearTextOnFocus = false
	box.Parent = playerPanel
	Instance.new("UICorner", box).CornerRadius = UDim.new(0, 6)

	return box
end

local speedSlider = createSetting("Speed:", "16", 10)
local jumpSlider = createSetting("JumpPower:", "50", 50)
local teleportBox = createSetting("Teleport to:", "", 90)
teleportBox.PlaceholderText = "Username"

-- Apply slider functionality
speedSlider.FocusLost:Connect(function()
	local hum = player.Character and player.Character:FindFirstChildOfClass("Humanoid")
	local val = tonumber(speedSlider.Text)
	if hum and val then
		hum.WalkSpeed = math.clamp(val, 0, 100)
	end
end)

jumpSlider.FocusLost:Connect(function()
	local hum = player.Character and player.Character:FindFirstChildOfClass("Humanoid")
	local val = tonumber(jumpSlider.Text)
	if hum and val then
		hum.JumpPower = math.clamp(val, 0, 150)
	end
end)

teleportBox.FocusLost:Connect(function(enterPressed)
	if enterPressed then
		local targetName = teleportBox.Text:lower():gsub("^%s*(.-)%s*$", "%1") -- trim + lowercase
		local target

		for _, plr in ipairs(Players:GetPlayers()) do
			if plr.Name:lower() == targetName then
				target = plr
				break
			end
		end

		local char = player.Character

		if target and target.Character and char and char:FindFirstChild("HumanoidRootPart") and target.Character:FindFirstChild("HumanoidRootPart") then
			char.HumanoidRootPart.CFrame = target.Character.HumanoidRootPart.CFrame + Vector3.new(2, 0, 0)
			showNotification("‚úÖ Teleport Success", "Teleported to player '" .. target.Name .. "'.")
		else
			showNotification("‚ö†Ô∏è Teleport Failed", "Could not teleport to player '" .. teleportBox.Text .. "'.")
			teleportBox.Text = "" -- auto-clear on fail
		end
	end
end)

-- Run code button functionality
runButton.MouseButton1Click:Connect(function()
	local code = codeBox.Text
	code = code:gsub("‚Äú", "\""):gsub("‚Äù", "\""):gsub("‚Äò", "'"):gsub("‚Äô", "'")

	if not loadstring then
		showNotification("‚ùå Error", "loadstring() is not supported in this environment.")
		return
	end

	local success, result = pcall(function()
		local func = loadstring(code)
		if func then func() else error("Invalid or empty code.") end
	end)

	if success then
		showNotification("‚úÖ Success", "Script executed successfully.")
	else
		showNotification("‚ùå Error", "Code failed to run:\n" .. tostring(result))
	end
end)

-- Toggle Button (GUI hide/show)
local toggleButton = Instance.new("ImageButton")
toggleButton.Size = UDim2.new(0, 28, 0, 28)
toggleButton.Position = UDim2.new(0, frame.AbsolutePosition.X - 35, 0, frame.AbsolutePosition.Y + 5)
toggleButton.BackgroundTransparency = 1
toggleButton.Image = "rbxassetid://6031094678"
toggleButton.Parent = screenGui
toggleButton.Active = true
toggleButton.Draggable = true
Instance.new("UICorner", toggleButton).CornerRadius = UDim.new(1, 0)

local guiVisible = true
local function updateTogglePosition()
	toggleButton.Position = UDim2.new(0, frame.AbsolutePosition.X - 35, 0, frame.AbsolutePosition.Y + 5)
end

RunService.RenderStepped:Connect(function()
	if guiVisible then
		updateTogglePosition()
	end
end)

toggleButton.MouseButton1Click:Connect(function()
	guiVisible = not guiVisible
	frame.Visible = guiVisible
	toggleButton.Image = guiVisible and "rbxassetid://6031094678" or "rbxassetid://6031097225"
	if not guiVisible then toggleButton.Position = UDim2.new(0, 10, 0, 10) end
end)

-- Toggle Player Panel on Player Tab Click
playerTab.MouseButton1Click:Connect(function()
	local toggle = not playerPanel.Visible
	playerPanel.Visible = toggle
	codeBox.Visible = not toggle
	runButton.Visible = not toggle
	clearButton.Visible = not toggle
	copyButton.Visible = not toggle
end)

